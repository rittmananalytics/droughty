version: 2
models:
  - name: actors_dim
    columns:
      - name: actor_code
        tests:
          - dbt_utils.at_least_one
      - name: actor_geo_country_code
        tests:
          - dbt_utils.at_least_one
      - name: actor_name
        tests:
          - dbt_utils.at_least_one
      - name: actor_pk
        tests:
          - not_null
          - unique
      - name: actor_type_code
        tests:
          - dbt_utils.at_least_one
      - name: actor_type_name
        tests:
          - dbt_utils.at_least_one
  - name: events_fct
    columns:
      - name: action_geo_country_code
        tests:
          - dbt_utils.at_least_one
      - name: action_geo_country_name
        tests:
          - dbt_utils.at_least_one
      - name: action_geo_full_name
        tests:
          - dbt_utils.at_least_one
      - name: action_geo_latitude
        tests:
          - dbt_utils.at_least_one
      - name: action_geo_longitude
        tests:
          - dbt_utils.at_least_one
      - name: event_pk
        tests:
          - not_null
          - unique
      - name: event_ts
        tests:
          - dbt_utils.at_least_one
      - name: protest_fk
        tests:
          - not_null
  - name: narratives_fct
    columns:
      - name: actor_fk
        tests:
          - not_null
      - name: event_fk
        tests:
          - not_null
      - name: narrative
        tests:
          - dbt_utils.at_least_one
      - name: narrative_pk
        tests:
          - not_null
          - unique
  - name: observations_fct
    columns:
      - name: event_fk
        tests:
          - not_null
      - name: observation_keywords
        tests:
          - dbt_utils.at_least_one
      - name: observation_page_description
        tests:
          - dbt_utils.at_least_one
      - name: observation_page_title
        tests:
          - dbt_utils.at_least_one
      - name: observation_pk
        tests:
          - not_null
          - unique
      - name: observation_type
        tests:
          - dbt_utils.at_least_one
      - name: observation_url
        tests:
          - dbt_utils.at_least_one
      - name: observer_fk
        tests:
          - not_null
      - name: published_date
        tests:
          - dbt_utils.at_least_one
  - name: observers_dim
    columns:
      - name: observer_domain
        tests:
          - dbt_utils.at_least_one
      - name: observer_pk
        tests:
          - not_null
          - unique
  - name: protests_dim
    columns:
      - name: countries
        tests:
          - dbt_utils.at_least_one
      - name: page_description_regex
        tests:
          - dbt_utils.at_least_one
      - name: protest_name
        tests:
          - dbt_utils.at_least_one
      - name: protest_pk
        tests:
          - not_null
          - unique
      - name: published_date_end
        tests:
          - dbt_utils.at_least_one
      - name: published_date_start
        tests:
          - dbt_utils.at_least_one
  - name: stg__gdelt__enhanced_mentions
    columns:
      - name: file_name
        tests:
          - dbt_utils.at_least_one
      - name: keywords
        tests:
          - dbt_utils.at_least_one
      - name: mention_url
        tests:
          - dbt_utils.at_least_one
      - name: page_description
        tests:
          - dbt_utils.at_least_one
      - name: page_name
        tests:
          - dbt_utils.at_least_one
      - name: page_title
        tests:
          - dbt_utils.at_least_one
      - name: source_file_date
        tests:
          - dbt_utils.at_least_one
  - name: stg__gdelt__events
    columns:
      - name: action_geo_adm1_code
        tests:
          - dbt_utils.at_least_one
      - name: action_geo_adm2_code
        tests:
          - dbt_utils.at_least_one
      - name: action_geo_country_code
        tests:
          - dbt_utils.at_least_one
      - name: action_geo_feature_id
        tests:
          - dbt_utils.at_least_one
      - name: action_geo_full_name
        tests:
          - dbt_utils.at_least_one
      - name: action_geo_latitude
        tests:
          - dbt_utils.at_least_one
      - name: action_geo_longitude
        tests:
          - dbt_utils.at_least_one
      - name: action_geo_type
        tests:
          - dbt_utils.at_least_one
      - name: actor1_code
        tests:
          - dbt_utils.at_least_one
      - name: actor1_country_code
        tests:
          - dbt_utils.at_least_one
      - name: actor1_ethnic_code
        tests:
          - dbt_utils.at_least_one
      - name: actor1_geo_adm1_code
        tests:
          - dbt_utils.at_least_one
      - name: actor1_geo_adm2_code
        tests:
          - dbt_utils.at_least_one
      - name: actor1_geo_country_code
        tests:
          - dbt_utils.at_least_one
      - name: actor1_geo_feature_id
        tests:
          - dbt_utils.at_least_one
      - name: actor1_geo_full_name
        tests:
          - dbt_utils.at_least_one
      - name: actor1_geo_latitude
        tests:
          - dbt_utils.at_least_one
      - name: actor1_geo_longitude
        tests:
          - dbt_utils.at_least_one
      - name: actor1_geo_type
        tests:
          - dbt_utils.at_least_one
      - name: actor1_known_group_code
        tests:
          - dbt_utils.at_least_one
      - name: actor1_name
        tests:
          - dbt_utils.at_least_one
      - name: actor1_religion1_code
        tests:
          - dbt_utils.at_least_one
      - name: actor1_religion2_code
        tests:
          - dbt_utils.at_least_one
      - name: actor1_type1_code
        tests:
          - dbt_utils.at_least_one
      - name: actor1_type2_code
        tests:
          - dbt_utils.at_least_one
      - name: actor1_type3_code
        tests:
          - dbt_utils.at_least_one
      - name: actor2_code
        tests:
          - dbt_utils.at_least_one
      - name: actor2_country_code
        tests:
          - dbt_utils.at_least_one
      - name: actor2_ethnic_code
        tests:
          - dbt_utils.at_least_one
      - name: actor2_geo_adm1_code
        tests:
          - dbt_utils.at_least_one
      - name: actor2_geo_adm2_code
        tests:
          - dbt_utils.at_least_one
      - name: actor2_geo_country_code
        tests:
          - dbt_utils.at_least_one
      - name: actor2_geo_feature_id
        tests:
          - dbt_utils.at_least_one
      - name: actor2_geo_full_name
        tests:
          - dbt_utils.at_least_one
      - name: actor2_geo_latitude
        tests:
          - dbt_utils.at_least_one
      - name: actor2_geo_longitude
        tests:
          - dbt_utils.at_least_one
      - name: actor2_geo_type
        tests:
          - dbt_utils.at_least_one
      - name: actor2_known_group_code
        tests:
          - dbt_utils.at_least_one
      - name: actor2_name
        tests:
          - dbt_utils.at_least_one
      - name: actor2_religion1_code
        tests:
          - dbt_utils.at_least_one
      - name: actor2_religion2_code
        tests:
          - dbt_utils.at_least_one
      - name: actor2_type1_code
        tests:
          - dbt_utils.at_least_one
      - name: actor2_type2_code
        tests:
          - dbt_utils.at_least_one
      - name: actor2_type3_code
        tests:
          - dbt_utils.at_least_one
      - name: avg_tone
        tests:
          - dbt_utils.at_least_one
      - name: creation_ts
        tests:
          - dbt_utils.at_least_one
      - name: event_base_code
        tests:
          - dbt_utils.at_least_one
      - name: event_code
        tests:
          - dbt_utils.at_least_one
      - name: event_root_code
        tests:
          - dbt_utils.at_least_one
      - name: gdelt_event_natural_key
        tests:
          - dbt_utils.at_least_one
      - name: goldstein_scale
        tests:
          - dbt_utils.at_least_one
      - name: is_root_event
        tests:
          - dbt_utils.at_least_one
      - name: mention_url
        tests:
          - dbt_utils.at_least_one
      - name: num_articles
        tests:
          - dbt_utils.at_least_one
      - name: num_mentions
        tests:
          - dbt_utils.at_least_one
      - name: num_sources
        tests:
          - dbt_utils.at_least_one
      - name: published_date
        tests:
          - dbt_utils.at_least_one
      - name: published_date_fraction_date
        tests:
          - dbt_utils.at_least_one
      - name: published_date_my
        tests:
          - dbt_utils.at_least_one
      - name: published_date_year
        tests:
          - dbt_utils.at_least_one
      - name: quad_class
        tests:
          - dbt_utils.at_least_one
      - name: source_url
        tests:
          - dbt_utils.at_least_one
  - name: stg__gdelt__ml_enriched_mentions
    columns:
      - name: file_name
        tests:
          - dbt_utils.at_least_one
      - name: is_relevant
        tests:
          - dbt_utils.at_least_one
      - name: keywords
        tests:
          - dbt_utils.at_least_one
      - name: mention_url
        tests:
          - dbt_utils.at_least_one
      - name: page_description
        tests:
          - dbt_utils.at_least_one
      - name: page_name
        tests:
          - dbt_utils.at_least_one
      - name: page_title
        tests:
          - dbt_utils.at_least_one
      - name: source_file_date
        tests:
          - dbt_utils.at_least_one
